import { Component, Input, ElementRef, ViewChild } from '@angular/core';
import { TXSettings } from "./tx-settings";
import { TX_JS } from "./tx-min-js";
import { JQUERY_JS } from "./jquery-js";
import { JQUERY_UI_JS } from "./jquery-ui-js";
import { JQUERY_UI_TOUCH_PUNCH } from "./jquery-ui-touch-punch-js";
import { TX_CSS } from "./tx-css";
import { JQUERY_UI_CSS } from "./jquery-ui-css";
import { Color } from './color';
export class DocumentEditorComponent {
    constructor(hostElement) {
        this.hostElement = hostElement;
        this.documentTargetMarkers = DocumentEditorComponent.DefaultSettings.DocumentTargetMarkers;
        this.backColor = DocumentEditorComponent.DefaultSettings.BackColor.toHexString();
        this.statusBarColor = DocumentEditorComponent.DefaultSettings.StatusBarColor.toHexString();
        this.editMode = 'Edit';
        this.contextMenusEnabled = DocumentEditorComponent.DefaultSettings.ContextMenusEnabled;
        this.saveDocumentQuestionDialogEnabled = DocumentEditorComponent.DefaultSettings.SaveDocumentQuestionDialogEnabled;
        this.tableGridLines = DocumentEditorComponent.DefaultSettings.TableGridLines;
        this.textFrameMarkerLines = DocumentEditorComponent.DefaultSettings.TextFrameMarkerLines;
        this.controlChars = DocumentEditorComponent.DefaultSettings.ControlChars;
        this.textFieldsEditable = DocumentEditorComponent.DefaultSettings.TextFieldsEditable;
        this.formattingPrinter = DocumentEditorComponent.DefaultSettings.FormattingPrinter;
        this.culture = DocumentEditorComponent.DefaultSettings.Culture;
        this.uiCulture = DocumentEditorComponent.DefaultSettings.UICulture;
        this.userNames = DocumentEditorComponent.DefaultSettings.UserNames;
        this.reconnectTimeout = DocumentEditorComponent.DefaultSettings.ReconnectTimeout;
        this.webSocketURL = DocumentEditorComponent.DefaultSettings.WebSocketURL;
        // Generate connection id
        this.connectionID = generateRandomID(21);
    }
    ngOnInit() {
        // Dynamically add necessary scripts and stylesheets to dom
        // jQuery UI CSS
        let elemStyle = document.createElement('style');
        elemStyle.innerText = JQUERY_UI_CSS;
        this.containerDiv.nativeElement.appendChild(elemStyle);
        // TX CSS
        elemStyle = document.createElement('style');
        elemStyle.title = 'TX Text Control HTML5 Editor main Stylesheet';
        elemStyle.innerText = TX_CSS;
        this.containerDiv.nativeElement.appendChild(elemStyle);
        // TX settings
        let elemScript = document.createElement('script');
        elemScript.type = 'application/json';
        elemScript.id = '__txSettings';
        elemScript.innerText = JSON.stringify(this.settings);
        this.containerDiv.nativeElement.appendChild(elemScript);
        // jQuery
        elemScript = document.createElement('script');
        elemScript.innerText = JQUERY_JS;
        this.containerDiv.nativeElement.appendChild(elemScript);
        // jQuery UI
        elemScript = document.createElement('script');
        elemScript.innerText = JQUERY_UI_JS;
        this.containerDiv.nativeElement.appendChild(elemScript);
        // Touch enhancements for jQuery UI
        elemScript = document.createElement('script');
        elemScript.innerText = JQUERY_UI_TOUCH_PUNCH;
        this.containerDiv.nativeElement.appendChild(elemScript);
        // $.noConflict()
        elemScript = document.createElement('script');
        elemScript.innerText = DocumentEditorComponent.NO_CONFLICT_JS;
        this.containerDiv.nativeElement.appendChild(elemScript);
        // TX main script file
        elemScript = document.createElement('script');
        elemScript.textContent = TX_JS;
        this.containerDiv.nativeElement.appendChild(elemScript);
        // Set stuff on host element
        this.hostElement.nativeElement.style.display = 'inline-block';
        this.hostElement.nativeElement.style.width = this.width;
        this.hostElement.nativeElement.style.height = this.height;
        // Fire "editor loaded" event
        var evt = new CustomEvent("txDocumentEditorLoaded", { detail: { /* Empty event argument */} });
        document.dispatchEvent(evt);
    }
    get settings() {
        let settings = new TXSettings(this.webSocketURL);
        settings.ConnectionID = this.connectionID;
        settings.DocumentTargetMarkers = this.documentTargetMarkers;
        settings.BackColor = Color.fromHexString(this.backColor);
        settings.StatusBarColor = Color.fromHexString(this.statusBarColor);
        settings.EditMode = TXSettings.editModeFromString(this.editMode);
        settings.ContextMenusEnabled = this.contextMenusEnabled;
        settings.SaveDocumentQuestionDialogEnabled = this.saveDocumentQuestionDialogEnabled;
        settings.TableGridLines = this.tableGridLines;
        settings.TextFrameMarkerLines = this.textFrameMarkerLines;
        settings.ControlChars = this.controlChars;
        settings.TextFieldsEditable = this.textFieldsEditable;
        settings.FormattingPrinter = this.formattingPrinter;
        settings.Culture = this.culture;
        settings.UICulture = this.uiCulture;
        settings.UserNames = this.userNames;
        settings.ReconnectTimeout = this.reconnectTimeout;
        settings.WebSocketURL = this.webSocketURL;
        return settings;
    }
}
DocumentEditorComponent.DefaultSettings = new TXSettings();
DocumentEditorComponent.NO_CONFLICT_JS = 'var j$1_10_2 = $.noConflict(true);';
DocumentEditorComponent.decorators = [
    { type: Component, args: [{
                selector: 'tx-document-editor',
                template: "<div #txTemplateDesignerContainer id=\"txTemplateDesignerContainer\" [style.position]=\"'relative'\">\r\n   <svg id=\"txLoader\" class=\"txLoader\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n      style=\"background: rgba(0, 0, 0, 0) none repeat scroll 0% 0%; display: block; shape-rendering: auto;\" width=\"71px\"\r\n      height=\"71px\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\">\r\n      <circle cx=\"50\" cy=\"50\" r=\"25\" stroke-width=\"5\" stroke=\"#555555\"\r\n         stroke-dasharray=\"39.269908169872416 39.269908169872416\" fill=\"none\" stroke-linecap=\"round\">\r\n         <animateTransform attributeName=\"transform\" type=\"rotate\" dur=\"1.6393442622950818s\" repeatCount=\"indefinite\"\r\n            keyTimes=\"0;1\" values=\"0 50 50;360 50 50\"></animateTransform>\r\n      </circle>\r\n      <circle cx=\"50\" cy=\"50\" r=\"19\" stroke-width=\"5\" stroke=\"#4d83b8\"\r\n         stroke-dasharray=\"29.845130209103033 29.845130209103033\" stroke-dashoffset=\"29.845130209103033\" fill=\"none\"\r\n         stroke-linecap=\"round\">\r\n         <animateTransform attributeName=\"transform\" type=\"rotate\" dur=\"1.6393442622950818s\" repeatCount=\"indefinite\"\r\n            keyTimes=\"0;1\" values=\"0 50 50;-360 50 50\"></animateTransform>\r\n      </circle>\r\n   </svg>\r\n   <div id=\"ribbonbar\" class=\"unselectable\">\r\n      <div id=\"txRibbonCover\"></div>\r\n      <div class=\"txRibbonScrollArrow\" id=\"txRibbonScrollButtonRight\" style=\"opacity: 0\">\r\n         <div class=\"txTriangle\" id=\"txBlackTriangleR\"></div>\r\n      </div>\r\n      <div class=\"txRibbonScrollArrow\" id=\"txRibbonScrollButtonLeft\" style=\"opacity: 0\">\r\n         <div class=\"txTriangle\" id=\"txBlackTriangleL\"></div>\r\n      </div>\r\n      <div id=\"txBtnRibbonHide\">\r\n         <img id=\"txArrowRibbonHideWrapper\"\r\n            src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=\" />\r\n      </div>\r\n      <ul class=\"tabs\" style=\"display: none\">\r\n      </ul>\r\n      <div id=\"txRibbonContentArea\">\r\n         <div id=\"txRibbonTabContentContainer\">\r\n         </div>\r\n      </div>\r\n   </div>\r\n   <div id=\"trackChangesSidebar\" class=\"sidebar\" style=\"overflow: hidden;\">\r\n      <img\r\n         src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=\"\r\n         class=\"closebtn button\" style=\"width: 16px; height: 16px\" />\r\n      <img\r\n         src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=\"\r\n         class=\"refreshbtn button\" style=\"width: 16px; height: 16px\" />\r\n      <div class=\"sidebarHeader unselectable\">\r\n         <span class=\"sidebarHeaderTitle unselectable\"></span>\r\n         <br />\r\n         <span class=\"sidebarHeaderSubTitle unselectable\"></span>\r\n      </div>\r\n      <div class=\"sidebarContentContainer unselectable\">\r\n         <canvas id=\"trackChangesCanvas\" class=\"trackChangesContent\"></canvas>\r\n         <div id=\"txTrackChangesScrollbar\" class=\"txScrollbar txScrollbar-vertical\">\r\n            <div class=\"scroll-button scroll-button-vert scroll-button-up unselectable\">\r\n               <div class=\"scroll-button-arrow-wrapper\"></div>\r\n            </div>\r\n            <div class=\"scrollbar-wrapper unselectable\">\r\n               <div class=\"txslider\"></div>\r\n            </div>\r\n            <div class=\"scroll-button scroll-button-vert scroll-button-down unselectable\"\r\n               style=\"vertical-align: bottom;\">\r\n               <div class=\"scroll-button-arrow-wrapper\"></div>\r\n            </div>\r\n         </div>\r\n         <div id=\"txTrackChangesHorScrollbar\" class=\"txScrollbar txScrollbar-horizontal\">\r\n            <div class=\"scroll-button scroll-button-hor scroll-button-left unselectable\">\r\n               <div class=\"scroll-button-arrow-wrapper\"></div>\r\n            </div>\r\n            <div class=\"scrollbar-wrapper unselectable\">\r\n               <div class=\"txslider\"></div>\r\n            </div>\r\n            <div class=\"scroll-button scroll-button-hor scroll-button-right unselectable\">\r\n               <div class=\"scroll-button-arrow-wrapper\"></div>\r\n            </div>\r\n         </div>\r\n      </div>\r\n   </div>\r\n   <canvas id=\"mainCanvas\" style=\"opacity: 0\"></canvas>\r\n   <canvas id=\"horRulerCanvas\" style=\"opacity: 0\"></canvas>\r\n   <canvas id=\"vertRulerCanvas\" style=\"opacity: 0\"></canvas>\r\n   <div class=\"txScrollbarContainer\" style=\"opacity: 0\">\r\n      <div id=\"scroll-button-left\" class=\"scroll-button scroll-button-hor unselectable\">\r\n         <div class=\"scroll-button-arrow-wrapper\"></div>\r\n      </div>\r\n      <div id=\"horizontal-scrollbar-wrapper\" class=\"scrollbar-wrapper unselectable\">\r\n         <div id=\"slider-horizontal\"></div>\r\n      </div>\r\n      <div id=\"scroll-button-right\" class=\"scroll-button scroll-button-hor unselectable\">\r\n         <div class=\"scroll-button-arrow-wrapper\"></div>\r\n      </div>\r\n   </div>\r\n   <div class=\"txScrollbarContainer\" style=\"opacity: 0\">\r\n      <div id=\"scroll-button-up\" class=\"scroll-button scroll-button-vert unselectable\">\r\n         <div class=\"scroll-button-arrow-wrapper\"></div>\r\n      </div>\r\n      <div id=\"vertical-scrollbar-wrapper\" class=\"scrollbar-wrapper unselectable\">\r\n         <div id=\"slider-vertical\"></div>\r\n      </div>\r\n      <div id=\"scroll-button-down\" class=\"scroll-button scroll-button-vert unselectable\">\r\n         <div class=\"scroll-button-arrow-wrapper\"></div>\r\n      </div>\r\n   </div>\r\n   <canvas id=\"statusBarCanvas\" style=\"opacity: 0\"></canvas>\r\n   <ul id=\"txContextMenu\" class=\"dropDownMenu contextMenu\">\r\n   </ul>\r\n   <form id=\"txNovalidateForm\" novalidate=\"novalidate\" spellcheck=\"false\" autocomplete=\"off\"></form>\r\n</div>",
                styles: [""]
            },] }
];
DocumentEditorComponent.ctorParameters = () => [
    { type: ElementRef }
];
DocumentEditorComponent.propDecorators = {
    containerDiv: [{ type: ViewChild, args: ['txTemplateDesignerContainer', { static: true },] }],
    width: [{ type: Input }],
    height: [{ type: Input }],
    documentTargetMarkers: [{ type: Input }],
    backColor: [{ type: Input }],
    statusBarColor: [{ type: Input }],
    editMode: [{ type: Input }],
    contextMenusEnabled: [{ type: Input }],
    saveDocumentQuestionDialogEnabled: [{ type: Input }],
    tableGridLines: [{ type: Input }],
    textFrameMarkerLines: [{ type: Input }],
    controlChars: [{ type: Input }],
    textFieldsEditable: [{ type: Input }],
    formattingPrinter: [{ type: Input }],
    culture: [{ type: Input }],
    uiCulture: [{ type: Input }],
    userNames: [{ type: Input }],
    reconnectTimeout: [{ type: Input }],
    webSocketURL: [{ type: Input }]
};
const ConIDCharset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_';
/**
 * Generates a random string with a given length.
 * @param length Length of the generated ID in characters.
 */
function generateRandomID(length) {
    if (length < 1)
        throw new Error('ID must be at least one character long.');
    let result = '';
    for (var i = 0; i < length; ++i) {
        result += ConIDCharset.charAt(Math.floor(Math.random() * ConIDCharset.length));
    }
    return result;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG9jdW1lbnQtZWRpdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3R4LW5nLWRvY3VtZW50LWVkaXRvci9zcmMvbGliL2RvY3VtZW50LWVkaXRvci9kb2N1bWVudC1lZGl0b3IuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDaEYsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQ3BDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDeEMsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzlDLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQ25FLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFDbEMsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFPaEMsTUFBTSxPQUFPLHVCQUF1QjtJQUtqQyxZQUFvQixXQUF1QjtRQUF2QixnQkFBVyxHQUFYLFdBQVcsQ0FBWTtRQVNsQywwQkFBcUIsR0FBWSx1QkFBdUIsQ0FBQyxlQUFlLENBQUMscUJBQXFCLENBQUM7UUFDL0YsY0FBUyxHQUFXLHVCQUF1QixDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDcEYsbUJBQWMsR0FBVyx1QkFBdUIsQ0FBQyxlQUFlLENBQUMsY0FBYyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzlGLGFBQVEsR0FBVyxNQUFNLENBQUM7UUFDMUIsd0JBQW1CLEdBQVks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U0FBQztnQkFDUixRQUFRLEVBQUUsb0JBQW9CO2dCQUM5QiwyL0xBQStDOzthQUVqRDs7O1lBZGtDLFVBQVU7OzsyQkFnQnpDLFNBQVMsU0FBQyw2QkFBNkIsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7b0JBV3pELEtBQUs7cUJBQ0wsS0FBSztvQ0FDTCxLQUFLO3dCQUNMLEtBQUs7NkJBQ0wsS0FBSzt1QkFDTCxLQUFLO2tDQUNMLEtBQUs7Z0RBQ0wsS0FBSzs2QkFDTCxLQUFLO21DQUNMLEtBQUs7MkJBQ0wsS0FBSztpQ0FDTCxLQUFLO2dDQUNMLEtBQUs7c0JBQ0wsS0FBSzt3QkFDTCxLQUFLO3dCQUNMLEtBQUs7K0JBQ0wsS0FBSzsyQkFDTCxLQUFLOztBQXFGVCxNQUFNLFlBQVksR0FBVyxpRUFBaUUsQ0FBQztBQUUvRjs7O0dBR0c7QUFDSCxTQUFTLGdCQUFnQixDQUFDLE1BQWM7SUFDckMsSUFBSSxNQUFNLEdBQUcsQ0FBQztRQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMseUNBQXlDLENBQUMsQ0FBQztJQUUzRSxJQUFJLE1BQU0sR0FBVyxFQUFFLENBQUM7SUFFeEIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRTtRQUM5QixNQUFNLElBQUksWUFBWSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztLQUNqRjtJQUVELE9BQU8sTUFBTSxDQUFDO0FBQ2pCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIEVsZW1lbnRSZWYsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBUWFNldHRpbmdzIH0gZnJvbSBcIi4vdHgtc2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgVFhfSlMgfSBmcm9tIFwiLi90eC1taW4tanNcIjtcclxuaW1wb3J0IHsgSlFVRVJZX0pTIH0gZnJvbSBcIi4vanF1ZXJ5LWpzXCI7XHJcbmltcG9ydCB7IEpRVUVSWV9VSV9KUyB9IGZyb20gXCIuL2pxdWVyeS11aS1qc1wiO1xyXG5pbXBvcnQgeyBKUVVFUllfVUlfVE9VQ0hfUFVOQ0ggfSBmcm9tIFwiLi9qcXVlcnktdWktdG91Y2gtcHVuY2gtanNcIjtcclxuaW1wb3J0IHsgVFhfQ1NTIH0gZnJvbSBcIi4vdHgtY3NzXCI7XHJcbmltcG9ydCB7IEpRVUVSWV9VSV9DU1MgfSBmcm9tIFwiLi9qcXVlcnktdWktY3NzXCI7XHJcbmltcG9ydCB7IENvbG9yIH0gZnJvbSAnLi9jb2xvcic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgc2VsZWN0b3I6ICd0eC1kb2N1bWVudC1lZGl0b3InLFxyXG4gICB0ZW1wbGF0ZVVybDogJy4vZG9jdW1lbnQtZWRpdG9yLmNvbXBvbmVudC5odG1sJyxcclxuICAgc3R5bGVVcmxzOiBbJy4vZG9jdW1lbnQtZWRpdG9yLmNvbXBvbmVudC5jc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRG9jdW1lbnRFZGl0b3JDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gICBAVmlld0NoaWxkKCd0eFRlbXBsYXRlRGVzaWduZXJDb250YWluZXInLCB7IHN0YXRpYzogdHJ1ZSB9KSBjb250YWluZXJEaXY6IEVsZW1lbnRSZWY7XHJcblxyXG4gICBwcml2YXRlIGNvbm5lY3Rpb25JRDogc3RyaW5nO1xyXG5cclxuICAgY29uc3RydWN0b3IocHJpdmF0ZSBob3N0RWxlbWVudDogRWxlbWVudFJlZikge1xyXG4gICAgICAvLyBHZW5lcmF0ZSBjb25uZWN0aW9uIGlkXHJcbiAgICAgIHRoaXMuY29ubmVjdGlvbklEID0gZ2VuZXJhdGVSYW5kb21JRCgyMSk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IERlZmF1bHRTZXR0aW5nczogVFhTZXR0aW5ncyA9IG5ldyBUWFNldHRpbmdzKCk7XHJcblxyXG4gICBASW5wdXQoKSB3aWR0aDogc3RyaW5nO1xyXG4gICBASW5wdXQoKSBoZWlnaHQ6IHN0cmluZztcclxuICAgQElucHV0KCkgZG9jdW1lbnRUYXJnZXRNYXJrZXJzOiBib29sZWFuID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuRGVmYXVsdFNldHRpbmdzLkRvY3VtZW50VGFyZ2V0TWFya2VycztcclxuICAgQElucHV0KCkgYmFja0NvbG9yOiBzdHJpbmcgPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5EZWZhdWx0U2V0dGluZ3MuQmFja0NvbG9yLnRvSGV4U3RyaW5nKCk7XHJcbiAgIEBJbnB1dCgpIHN0YXR1c0JhckNvbG9yOiBzdHJpbmcgPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5EZWZhdWx0U2V0dGluZ3MuU3RhdHVzQmFyQ29sb3IudG9IZXhTdHJpbmcoKTtcclxuICAgQElucHV0KCkgZWRpdE1vZGU6IHN0cmluZyA9ICdFZGl0JztcclxuICAgQElucHV0KCkgY29udGV4dE1lbnVzRW5hYmxlZDogYm9vbGVhbiA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50LkRlZmF1bHRTZXR0aW5ncy5Db250ZXh0TWVudXNFbmFibGVkO1xyXG4gICBASW5wdXQoKSBzYXZlRG9jdW1lbnRRdWVzdGlvbkRpYWxvZ0VuYWJsZWQ6IGJvb2xlYW4gPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5EZWZhdWx0U2V0dGluZ3MuU2F2ZURvY3VtZW50UXVlc3Rpb25EaWFsb2dFbmFibGVkO1xyXG4gICBASW5wdXQoKSB0YWJsZUdyaWRMaW5lczogYm9vbGVhbiA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50LkRlZmF1bHRTZXR0aW5ncy5UYWJsZUdyaWRMaW5lcztcclxuICAgQElucHV0KCkgdGV4dEZyYW1lTWFya2VyTGluZXM6IGJvb2xlYW4gPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5EZWZhdWx0U2V0dGluZ3MuVGV4dEZyYW1lTWFya2VyTGluZXM7XHJcbiAgIEBJbnB1dCgpIGNvbnRyb2xDaGFyczogYm9vbGVhbiA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50LkRlZmF1bHRTZXR0aW5ncy5Db250cm9sQ2hhcnM7XHJcbiAgIEBJbnB1dCgpIHRleHRGaWVsZHNFZGl0YWJsZTogYm9vbGVhbiA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50LkRlZmF1bHRTZXR0aW5ncy5UZXh0RmllbGRzRWRpdGFibGU7XHJcbiAgIEBJbnB1dCgpIGZvcm1hdHRpbmdQcmludGVyOiBzdHJpbmcgPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5EZWZhdWx0U2V0dGluZ3MuRm9ybWF0dGluZ1ByaW50ZXI7XHJcbiAgIEBJbnB1dCgpIGN1bHR1cmU6IHN0cmluZyA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50LkRlZmF1bHRTZXR0aW5ncy5DdWx0dXJlO1xyXG4gICBASW5wdXQoKSB1aUN1bHR1cmU6IHN0cmluZyA9IERvY3VtZW50RWRpdG9yQ29tcG9uZW50LkRlZmF1bHRTZXR0aW5ncy5VSUN1bHR1cmU7XHJcbiAgIEBJbnB1dCgpIHVzZXJOYW1lczogc3RyaW5nW10gPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5EZWZhdWx0U2V0dGluZ3MuVXNlck5hbWVzO1xyXG4gICBASW5wdXQoKSByZWNvbm5lY3RUaW1lb3V0OiBudW1iZXIgPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5EZWZhdWx0U2V0dGluZ3MuUmVjb25uZWN0VGltZW91dDtcclxuICAgQElucHV0KCkgd2ViU29ja2V0VVJMOiBzdHJpbmcgPSBEb2N1bWVudEVkaXRvckNvbXBvbmVudC5EZWZhdWx0U2V0dGluZ3MuV2ViU29ja2V0VVJMO1xyXG5cclxuICAgbmdPbkluaXQoKSB7XHJcbiAgICAgIC8vIER5bmFtaWNhbGx5IGFkZCBuZWNlc3Nhcnkgc2NyaXB0cyBhbmQgc3R5bGVzaGVldHMgdG8gZG9tXHJcblxyXG4gICAgICAvLyBqUXVlcnkgVUkgQ1NTXHJcbiAgICAgIGxldCBlbGVtU3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG4gICAgICBlbGVtU3R5bGUuaW5uZXJUZXh0ID0gSlFVRVJZX1VJX0NTUztcclxuICAgICAgdGhpcy5jb250YWluZXJEaXYubmF0aXZlRWxlbWVudC5hcHBlbmRDaGlsZChlbGVtU3R5bGUpO1xyXG5cclxuICAgICAgLy8gVFggQ1NTXHJcbiAgICAgIGVsZW1TdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcbiAgICAgIGVsZW1TdHlsZS50aXRsZSA9ICdUWCBUZXh0IENvbnRyb2wgSFRNTDUgRWRpdG9yIG1haW4gU3R5bGVzaGVldCc7XHJcbiAgICAgIGVsZW1TdHlsZS5pbm5lclRleHQgPSBUWF9DU1M7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyRGl2Lm5hdGl2ZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlbVN0eWxlKTtcclxuXHJcbiAgICAgIC8vIFRYIHNldHRpbmdzXHJcbiAgICAgIGxldCBlbGVtU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgIGVsZW1TY3JpcHQudHlwZSA9ICdhcHBsaWNhdGlvbi9qc29uJztcclxuICAgICAgZWxlbVNjcmlwdC5pZCA9ICdfX3R4U2V0dGluZ3MnO1xyXG4gICAgICBlbGVtU2NyaXB0LmlubmVyVGV4dCA9IEpTT04uc3RyaW5naWZ5KHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgICB0aGlzLmNvbnRhaW5lckRpdi5uYXRpdmVFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1TY3JpcHQpO1xyXG5cclxuICAgICAgLy8galF1ZXJ5XHJcbiAgICAgIGVsZW1TY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgZWxlbVNjcmlwdC5pbm5lclRleHQgPSBKUVVFUllfSlM7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyRGl2Lm5hdGl2ZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlbVNjcmlwdCk7XHJcblxyXG4gICAgICAvLyBqUXVlcnkgVUlcclxuICAgICAgZWxlbVNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICBlbGVtU2NyaXB0LmlubmVyVGV4dCA9IEpRVUVSWV9VSV9KUztcclxuICAgICAgdGhpcy5jb250YWluZXJEaXYubmF0aXZlRWxlbWVudC5hcHBlbmRDaGlsZChlbGVtU2NyaXB0KTtcclxuXHJcbiAgICAgIC8vIFRvdWNoIGVuaGFuY2VtZW50cyBmb3IgalF1ZXJ5IFVJXHJcbiAgICAgIGVsZW1TY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgZWxlbVNjcmlwdC5pbm5lclRleHQgPSBKUVVFUllfVUlfVE9VQ0hfUFVOQ0g7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyRGl2Lm5hdGl2ZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlbVNjcmlwdCk7XHJcblxyXG4gICAgICAvLyAkLm5vQ29uZmxpY3QoKVxyXG4gICAgICBlbGVtU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgIGVsZW1TY3JpcHQuaW5uZXJUZXh0ID0gRG9jdW1lbnRFZGl0b3JDb21wb25lbnQuTk9fQ09ORkxJQ1RfSlM7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyRGl2Lm5hdGl2ZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlbVNjcmlwdCk7XHJcblxyXG4gICAgICAvLyBUWCBtYWluIHNjcmlwdCBmaWxlXHJcbiAgICAgIGVsZW1TY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgZWxlbVNjcmlwdC50ZXh0Q29udGVudCA9IFRYX0pTO1xyXG4gICAgICB0aGlzLmNvbnRhaW5lckRpdi5uYXRpdmVFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1TY3JpcHQpO1xyXG5cclxuICAgICAgLy8gU2V0IHN0dWZmIG9uIGhvc3QgZWxlbWVudFxyXG4gICAgICB0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xyXG4gICAgICB0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuc3R5bGUud2lkdGggPSB0aGlzLndpZHRoO1xyXG4gICAgICB0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XHJcblxyXG4gICAgICAvLyBGaXJlIFwiZWRpdG9yIGxvYWRlZFwiIGV2ZW50XHJcbiAgICAgIHZhciBldnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJ0eERvY3VtZW50RWRpdG9yTG9hZGVkXCIsIHsgZGV0YWlsOiB7IC8qIEVtcHR5IGV2ZW50IGFyZ3VtZW50ICovIH0gfSlcclxuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldnQpO1xyXG4gICB9XHJcblxyXG4gICBnZXQgc2V0dGluZ3MoKTogVFhTZXR0aW5ncyB7XHJcbiAgICAgIGxldCBzZXR0aW5ncyA9IG5ldyBUWFNldHRpbmdzKHRoaXMud2ViU29ja2V0VVJMKTtcclxuXHJcbiAgICAgIHNldHRpbmdzLkNvbm5lY3Rpb25JRCA9IHRoaXMuY29ubmVjdGlvbklEXHJcbiAgICAgIHNldHRpbmdzLkRvY3VtZW50VGFyZ2V0TWFya2VycyA9IHRoaXMuZG9jdW1lbnRUYXJnZXRNYXJrZXJzO1xyXG4gICAgICBzZXR0aW5ncy5CYWNrQ29sb3IgPSBDb2xvci5mcm9tSGV4U3RyaW5nKHRoaXMuYmFja0NvbG9yKTtcclxuICAgICAgc2V0dGluZ3MuU3RhdHVzQmFyQ29sb3IgPSBDb2xvci5mcm9tSGV4U3RyaW5nKHRoaXMuc3RhdHVzQmFyQ29sb3IpO1xyXG4gICAgICBzZXR0aW5ncy5FZGl0TW9kZSA9IFRYU2V0dGluZ3MuZWRpdE1vZGVGcm9tU3RyaW5nKHRoaXMuZWRpdE1vZGUpO1xyXG4gICAgICBzZXR0aW5ncy5Db250ZXh0TWVudXNFbmFibGVkID0gdGhpcy5jb250ZXh0TWVudXNFbmFibGVkO1xyXG4gICAgICBzZXR0aW5ncy5TYXZlRG9jdW1lbnRRdWVzdGlvbkRpYWxvZ0VuYWJsZWQgPSB0aGlzLnNhdmVEb2N1bWVudFF1ZXN0aW9uRGlhbG9nRW5hYmxlZDtcclxuICAgICAgc2V0dGluZ3MuVGFibGVHcmlkTGluZXMgPSB0aGlzLnRhYmxlR3JpZExpbmVzO1xyXG4gICAgICBzZXR0aW5ncy5UZXh0RnJhbWVNYXJrZXJMaW5lcyA9IHRoaXMudGV4dEZyYW1lTWFya2VyTGluZXM7XHJcbiAgICAgIHNldHRpbmdzLkNvbnRyb2xDaGFycyA9IHRoaXMuY29udHJvbENoYXJzO1xyXG4gICAgICBzZXR0aW5ncy5UZXh0RmllbGRzRWRpdGFibGUgPSB0aGlzLnRleHRGaWVsZHNFZGl0YWJsZTtcclxuICAgICAgc2V0dGluZ3MuRm9ybWF0dGluZ1ByaW50ZXIgPSB0aGlzLmZvcm1hdHRpbmdQcmludGVyO1xyXG4gICAgICBzZXR0aW5ncy5DdWx0dXJlID0gdGhpcy5jdWx0dXJlO1xyXG4gICAgICBzZXR0aW5ncy5VSUN1bHR1cmUgPSB0aGlzLnVpQ3VsdHVyZTtcclxuICAgICAgc2V0dGluZ3MuVXNlck5hbWVzID0gdGhpcy51c2VyTmFtZXM7XHJcbiAgICAgIHNldHRpbmdzLlJlY29ubmVjdFRpbWVvdXQgPSB0aGlzLnJlY29ubmVjdFRpbWVvdXQ7XHJcbiAgICAgIHNldHRpbmdzLldlYlNvY2tldFVSTCA9IHRoaXMud2ViU29ja2V0VVJMO1xyXG5cclxuICAgICAgcmV0dXJuIHNldHRpbmdzO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBOT19DT05GTElDVF9KUzogc3RyaW5nID0gJ3ZhciBqJDFfMTBfMiA9ICQubm9Db25mbGljdCh0cnVlKTsnO1xyXG59XHJcblxyXG5jb25zdCBDb25JRENoYXJzZXQ6IHN0cmluZyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMTIzNDU2Nzg5MF8nO1xyXG5cclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIHJhbmRvbSBzdHJpbmcgd2l0aCBhIGdpdmVuIGxlbmd0aC5cclxuICogQHBhcmFtIGxlbmd0aCBMZW5ndGggb2YgdGhlIGdlbmVyYXRlZCBJRCBpbiBjaGFyYWN0ZXJzLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21JRChsZW5ndGg6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgIGlmIChsZW5ndGggPCAxKSB0aHJvdyBuZXcgRXJyb3IoJ0lEIG11c3QgYmUgYXQgbGVhc3Qgb25lIGNoYXJhY3RlciBsb25nLicpO1xyXG5cclxuICAgbGV0IHJlc3VsdDogc3RyaW5nID0gJyc7XHJcblxyXG4gICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XHJcbiAgICAgIHJlc3VsdCArPSBDb25JRENoYXJzZXQuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIENvbklEQ2hhcnNldC5sZW5ndGgpKTtcclxuICAgfVxyXG5cclxuICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG4iXX0=